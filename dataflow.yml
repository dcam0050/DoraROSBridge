nodes:
  - id: ros1-image-source
    path: target/debug/ros1-image-source
    inputs:
      tick: dora/timer/millis/10
    env:
      ROS_MASTER_URI: "http://tiago-119c:11311"
      ROS_HOSTNAME: "katana"
      ROS_IMAGE_TOPIC: "/xtion/rgb/image_raw"
      CMAKE_PREFIX_PATH: "/opt/ros/noetic"
      ROS_PACKAGE_PATH: "/opt/ros/noetic/share"
      ROSRUST_MSG_PATH: "/opt/ros/noetic/share"
      # OpenTelemetry environment variables
      OTEL_SERVICE_NAME: "ros1-image-source"
      OTEL_RESOURCE_ATTRIBUTES: "service.name=ros1-image-source"
    outputs:
      - image

  - id: ros2-image-sink
    build: cargo build -p ros2-image-sink
    path: target/debug/ros2-image-sink
    inputs:
      image: ros1-image-source/image
    env:
      ROS2_TOPIC: "/camera/image_raw"
      # OpenTelemetry environment variables
      OTEL_SERVICE_NAME: "ros2-image-sink"
      OTEL_RESOURCE_ATTRIBUTES: "service.name=ros2-image-sink"
